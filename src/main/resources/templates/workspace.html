<!doctype html>
<!--suppress JSCheckFunctionSignatures -->
<html lang="en"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TickFocus</title>
    <link rel="stylesheet" th:href="@{css/style.css}">
    <link rel="stylesheet" th:href="@{css/workspace.css}">
    <link rel="stylesheet" th:href="@{css/components/nav-drawer.css}">
    <link rel="stylesheet" th:href="@{css/components/icon-button.css}">
    <link rel="stylesheet" th:href="@{css/components/modal-window.css}">
    <link rel="stylesheet" th:href="@{css/components/text-button.css}">
</head>
<body>
    <div class="navigation-drawer" id="navigation-drawer">
        <div class="nav-headline headline-small-500">
            TickFocus
        </div>
        <div class="nav-section-header body-medium-500">
            Pages
        </div>
        <a class="nav-item nav-item-active body-medium-500" th:href="@{/workspace}">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <g clip-path="url(#a)">
                    <path fill="currentColor" d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1Z"/>
                </g>
                <defs>
                    <clipPath id="a">
                        <path fill="currentColor" d="M0 0h24v24H0z"/>
                    </clipPath>
                </defs>
            </svg>

            <span>Workspace</span>
        </a>
        <a class="nav-item body-medium-500">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <g clip-path="url(#a)">
                    <path fill="currentColor" d="M22 8c0-.55-.45-1-1-1h-7c-.55 0-1 .45-1 1s.45 1 1 1h7c.55 0 1-.45 1-1Zm-9 8c0 .55.45 1 1 1h7c.55 0 1-.45 1-1s-.45-1-1-1h-7c-.55 0-1 .45-1 1ZM10.47 4.63c.39.39.39 1.02 0 1.41l-4.23 4.25c-.39.39-1.02.39-1.42 0L2.7 8.16a.996.996 0 1 1 1.41-1.41l1.42 1.42 3.54-3.54c.38-.38 1.02-.38 1.4 0Zm.01 8.01c.39.39.39 1.02 0 1.41L6.25 18.3c-.39.39-1.02.39-1.42 0L2.7 16.16a.996.996 0 1 1 1.41-1.41l1.42 1.42 3.54-3.54c.38-.38 1.02-.38 1.41.01Z"/>
                </g>
                <defs>
                    <clipPath id="a">
                        <path fill="currentColor" d="M0 0h24v24H0z"/>
                    </clipPath>
                </defs>
            </svg>

            <span>Tasks</span>

            <svg class="lock" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <g clip-path="url(#a)">
                    <path fill="currentColor" d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2Zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2ZM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9Z"/>
                </g>
                <defs>
                    <clipPath id="a">
                        <path fill="currentColor" d="M0 0h24v24H0z"/>
                    </clipPath>
                </defs>
            </svg>
        </a>
        <div class="nav-divider-container">
            <div class="nav-divider"></div>
        </div>
        <div class="nav-section-header body-medium-500">
            Your account
        </div>

        <a th:href="@{/login}" class="nav-item body-medium-500" sec:authorize="isAnonymous()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <g clip-path="url(#a)">
                    <path fill="currentColor" d="M10.3 7.7a.984.984 0 0 0 0 1.4l1.9 1.9H3c-.55 0-1 .45-1 1s.45 1 1 1h9.2l-1.9 1.9a.984.984 0 0 0 0 1.4c.39.39 1.01.39 1.4 0l3.59-3.59a.996.996 0 0 0 0-1.41L11.7 7.7a.984.984 0 0 0-1.4 0ZM20 19h-7c-.55 0-1 .45-1 1s.45 1 1 1h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-7c-.55 0-1 .45-1 1s.45 1 1 1h7v14Z"/>
                </g>
                <defs>
                    <clipPath id="a">
                        <path fill="currentColor" d="M0 0h24v24H0z"/>
                    </clipPath>
                </defs>
            </svg>


            <span>Sign In</span>
        </a>

        <a th:href="@{/register}" class="nav-item body-medium-500" sec:authorize="isAnonymous()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <g clip-path="url(#a)">
                    <path fill="currentColor" d="M15.39 14.56C13.71 13.7 11.53 13 9 13s-4.71.7-6.39 1.56A2.97 2.97 0 0 0 1 17.22V20h16v-2.78c0-1.12-.61-2.15-1.61-2.66ZM9 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4Zm11-3V7c0-.55-.45-1-1-1s-1 .45-1 1v2h-2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1h-2Z"/>
                </g>
                <defs>
                    <clipPath id="a">
                        <path fill="currentColor" d="M0 0h24v24H0z"/>
                    </clipPath>
                </defs>
            </svg>


            <span>Create Account</span>
        </a>

        <a class="nav-item body-medium-500" sec:authorize="isAuthenticated()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <g clip-path="url(#a)">
                    <path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4Zm0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4Z"/>
                </g>
                <defs>
                    <clipPath id="a">
                        <path fill="currentColor" d="M0 0h24v24H0z"/>
                    </clipPath>
                </defs>
            </svg>

            <span>My Profile</span>

            <svg class="lock" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <g clip-path="url(#a)">
                    <path fill="currentColor" d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2Zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2ZM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9Z"/>
                </g>
                <defs>
                    <clipPath id="a">
                        <path fill="currentColor" d="M0 0h24v24H0z"/>
                    </clipPath>
                </defs>
            </svg>
        </a>

        <form th:action="@{/logout}" method="post" id="logout-form" style="display: none"></form>

        <button class="nav-item body-medium-500" sec:authorize="isAuthenticated()" type="submit" form="logout-form">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path fill="#000" d="M15.325 16.275a1.112 1.112 0 0 1-.275-.738c0-.275.092-.504.275-.687l1.85-1.85H10a.965.965 0 0 1-.712-.288A.965.965 0 0 1 9 12c0-.283.096-.521.288-.713A.967.967 0 0 1 10 11h7.175l-1.85-1.85c-.2-.2-.3-.437-.3-.712 0-.275.1-.513.3-.713.183-.2.413-.3.688-.3.275 0 .504.092.687.275l3.6 3.6c.1.1.171.208.213.325.041.117.062.242.062.375s-.02.258-.062.375a.883.883 0 0 1-.213.325l-3.6 3.6c-.217.217-.454.312-.712.287a1.052 1.052 0 0 1-.663-.312ZM5 21a1.93 1.93 0 0 1-1.413-.587A1.928 1.928 0 0 1 3 19V5c0-.55.196-1.021.587-1.413A1.928 1.928 0 0 1 5 3h6a.97.97 0 0 1 .713.287A.97.97 0 0 1 12 4a.97.97 0 0 1-.287.712A.968.968 0 0 1 11 5H5v14h6c.283 0 .521.096.713.288A.967.967 0 0 1 12 20a.97.97 0 0 1-.287.712A.968.968 0 0 1 11 21H5Z"/>
            </svg>

            <span>Logout</span>
        </button>
    </div>

    <div class="navigation-drawer-shading" id="navigation-drawer-shading" onclick="toggleNavigationDrawer()"></div>

    <div class="top-bar">
        <button class="icon-button" onclick="toggleNavigationDrawer()">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="none" viewBox="0 0 48 48">
                <g clip-path="url(#a)">
                    <path fill="currentColor" d="M24 16c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4Zm0 4c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4Zm0 12c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4Z"/>
                </g>
                <defs>
                    <clipPath id="a">
                        <path fill="currentColor" d="M0 0h48v48H0z"/>
                    </clipPath>
                </defs>
            </svg>
        </button>
        <button class="icon-button" id="open-settings">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <g clip-path="url(#a)">
                    <path fill="currentColor" d="M19.5 12c0-.23-.01-.45-.03-.68l1.86-1.41c.4-.3.51-.86.26-1.3l-1.87-3.23a.987.987 0 0 0-1.25-.42l-2.15.91c-.37-.26-.76-.49-1.17-.68l-.29-2.31c-.06-.5-.49-.88-.99-.88h-3.73c-.51 0-.94.38-1 .88l-.29 2.31c-.41.19-.8.42-1.17.68l-2.15-.91c-.46-.2-1-.02-1.25.42L2.41 8.62c-.25.44-.14.99.26 1.3l1.86 1.41a7.343 7.343 0 0 0 0 1.35l-1.86 1.41c-.4.3-.51.86-.26 1.3l1.87 3.23c.25.44.79.62 1.25.42l2.15-.91c.37.26.76.49 1.17.68l.29 2.31c.06.5.49.88.99.88h3.73c.5 0 .93-.38.99-.88l.29-2.31c.41-.19.8-.42 1.17-.68l2.15.91c.46.2 1 .02 1.25-.42l1.87-3.23c.25-.44.14-.99-.26-1.3l-1.86-1.41c.03-.23.04-.45.04-.68Zm-7.46 3.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5Z"/>
                </g>
                <defs>
                    <clipPath id="a">
                        <path fill="currentColor" d="M0 0h24v24H0z"/>
                    </clipPath>
                </defs>
            </svg>
        </button>
    </div>

    <dialog class="modal-window" id="settings">
        <div class="modal-text-content">
            <div class="headline-small">Settings</div>
            <div sec:authorize="anonymous" class="body-medium">
                To edit and save settings you should be authorized.
                Settings are synchronized while you are using the same account.
            </div>
        </div>
        <div class="modal-actions">
            <form method="dialog">
                <button class="text-button body-medium-500">Discard</button>
            </form>

            <a th:href="@{/login}" class="text-button body-medium-500">Sign In</a>
        </div>
    </dialog>

    <div class="work-area">
        <div class="tasks">

        </div>

        <div class="progress">
            <div class="progress-text headline-medium">
                <span th:text="${timerStatus.text}">Resting...</span>
            </div>
            <div class="progress-bar" id="slice-progress" th:classappend="${timerStatus.primary ? '' : 'progress-bar-tertiary'}">
                <div class="active-indicator active-indicator-none" id="slice-active"></div>
                <div class="track" id="slice-track">
                </div>
                <div class="track-stop" id="slice-track-stop"></div>
            </div>
            <div class="time-left body-large" id="time-left">
                0s left
            </div>
            <div class="buttons-container body-medium">
                <form th:action="@{workspace/startTimer}" id="start-timer"></form>
                <button th:disabled="${timerStatus.running}" type="submit" form="start-timer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="14" fill="none" viewBox="0 0 11 14">
                        <path fill="currentColor" d="M0 1.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 0 0 0-1.69L1.54.98A.998.998 0 0 0 0 1.82Z"/>
                    </svg>
                    <span>Start Session</span>
                </button>

                <form th:action="@{workspace/stopTimer}" id="stop-timer"></form>
                <button th:disabled="${!timerStatus.running}" type="submit" form="stop-timer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10">
                        <path fill="currentColor" d="M2 .5h6c.825 0 1.5.675 1.5 1.5v6c0 .825-.675 1.5-1.5 1.5H2C1.175 9.5.5 8.825.5 8V2C.5 1.175 1.175.5 2 .5Z"/>
                    </svg>
                    <span>End Session</span>
                </button>

                <form th:action="@{workspace/endTimer}" id="end-timer" style="display: none"></form>
            </div>
        </div>
    </div>

    <script th:inline="javascript">
        const isTimerStarted = [[${timerStatus.running}]]
        const timerStartDate = new Date([[${timerStatus.startDate}]])
        const timerEndDate = new Date([[${timerStatus.endDate}]])
    </script>
    <script th:src="@{js/workspace.js}"></script>
    <script th:src="@{js/components/nav-drawer.js}"></script>
</body>
</html>